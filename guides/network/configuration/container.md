# 容器网络

容器使用的网络类型（无论是桥接网络，覆盖网络，macvlan网络还是自定义网络插件）在容器内部都是透明的。 从容器的角度来看，它具有一个包含`IP`地址，网关，路由表，`DNS`服务和其他网络详细信息的网络接口（假设容器未使用`none`网络驱动程序）。 从容器的角度来看，本主题与网络相关。

## 已发布的端口
默认情况下，创建容器时，它不会将其任何端口发布到外界。 要使端口可用于`Docker`外部的服务或未连接到容器网络的`Docker`容器，请使用`--publish`或`-p`标志。 这将创建一个防火墙规则，该规则将容器端口映射到`Docker`主机上的端口。 这里有些例子。

| 标志值 | 描述 | 
| --- | --- |
| `-p 8080:80` | 将容器中的`TCP`端口`80`映射到`Docker`主机上的端口`8080`。 |
| `-p 192.168.1.100:8080:80` | 将容器中的`TCP`端口`80`映射到`Docker`主机上的端口`8080`，以连接到主机`IP` `192.168.1.100`。 |
| `-p 8080:80/udp` | 将容器中的`UDP`端口`80`映射到`Docker`主机上的端口`8080`。 |
| `-p 8080:80/tcp -p 8080:80/udp` | 将容器中的`TCP`端口`80`映射到`Docker`主机上的`TCP`端口`8080`，并将容器中的`UDP`端口`80`映射到`Docker`主机上的`UDP`端口`8080`。 |

## IP地址和主机名
默认情况下，为容器连接到的每个`Docker`网络分配一个`IP`地址。 `IP`地址是从分配给网络的池中分配的，因此`Docker`守护进程实际上充当了每个容器的`DHCP`服务器。每个网络还具有默认的子网掩码和网关。

容器启动时，只能使用`--network`将其连接到单个网络。但是，您可以使用`docker network connect`将正在运行的容器连接到多个网络。使用`--network`标志启动容器时，可以使用`--ip`或`--ip6`标志指定分配给该网络上的容器的`IP`地址。

使用`docker network connect`将现有容器连接到其他网络时，可以在该命令上使用`--ip`或`--ip6`标志来指定其他网络上容器的`IP`地址。

同样，容器的主机名默认为`Docker`中容器的`ID`。您可以使用`--hostname`覆盖主机名。使用`docker network connect`连接到现有网络时，可以使用`--alias`标志为该网络上的容器指定其他网络别名。

## DNS服务
默认情况下，容器会继承`Docker`守护进程的`DNS`设置，包括`/etc/hosts`和`/etc/resolv.conf`。您可以在每个容器的基础上覆盖这些设置。

| 标志值 | 描述 | 
| --- | --- |
| `--dns` | `DNS`服务器的`IP`地址。 要指定多个`DNS`服务器，请使用多个`--dns`标志。 如果容器无法访问您指定的任何`IP`地址，则会添加`Google`的公共`DNS`服务器`8.8.8.8`，以便您的容器可以解析`Internet`域。 | 
| `--dns-search` | 一个`DNS`搜索域，用于搜索非完全限定的主机名。 要指定多个`DNS`搜索前缀，请使用多个`--dns-search`标志。 |
| `--dns-opt` | 代表`DNS`选项及其值的键/值对。 有关有效选项，请参阅操作系统文档中的`resolv.conf`。 | 
| `hostname` | 容器本身使用的主机名。 如果未指定，则默认为容器的`ID`。 |

## 代理服务器
如果容器需要代理服务器，参见[代理服务器](https://docs.docker.com/network/proxy/)